{"version":3,"sources":["app/csv.cljs"],"mappings":"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","names":["app.csv/csv-data","reagent.core.atom","app.csv/maps-to-csv","maps","js/shadow.js.shim.module$csv_stringify$sync.stringify","cljs.core/clj->js","app.csv/download-as-csv","export-name","data-blob","js/Blob","link","js/document","js/URL","app.csv/first-file","cljs.core.map","e","target","file","app.csv/my-parse-csv","csv-data","cljs.core.js__GT_clj","js/shadow.js.shim.module$csv_parse$sync.parse","app.csv/extract-result","p1__125836#","app.csv/input-upload-reqs","cljs.core.async.chan","app.csv/input-file-reads","c__26976__auto__","cljs.core.async.impl.dispatch/run","f__26977__auto__","switch__26906__auto__","state_125851","state_val_125852","statearr-125853","inst_125839","js/FileReader","statearr-125854","cljs.core.async.impl.ioc-helpers/take!","inst_125849","cljs.core.async.impl.ioc-helpers/return-chan","inst_125841","inst_125842","inst_125843","inst_125844","p1__125837#","inst_125845","inst_125846","statearr-125855","statearr-125856","statearr-125857","state-machine__26907__auto__","ret-value__26908__auto__","result__26909__auto__","cljs.core/keyword-identical?","ex__26910__auto__","e125858","statearr-125859","cljs.core/seq","statearr-125860","cljs.core/first","state__26978__auto__","statearr-125861","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","reader","cljs.core.swap_BANG_","cljs.core/assoc","cljs.core.async.put_BANG_","state_125872","state_val_125873","statearr-125889","inst_125869","inst_125865","inst_125866","statearr-125892","statearr-125893","statearr-125895","e125897","statearr-125898","statearr-125900","statearr-125904","app.csv/biomarker-upload-reqs","app.csv/biomarker-file-reads","state_125930","state_val_125931","statearr-125934","inst_125918","statearr-125936","inst_125928","inst_125920","inst_125921","inst_125922","inst_125923","p1__125914#","inst_125924","inst_125925","statearr-125941","statearr-125942","statearr-125944","e125947","statearr-125951","statearr-125959","statearr-125964","state_125975","state_val_125976","statearr-125979","inst_125973","inst_125969","inst_125970","statearr-125984","statearr-125985","statearr-125997","e125998","statearr-125999","statearr-126000","statearr-126002","p1__126005#","app.csv/upload-btn","file-name","upload-reqs-channel","or__4253__auto__"],"sourcesContent":["(ns app.csv\n  (:require\n   [\"csv-parse/sync\" :rename {parse parse-csv}]\n   [\"csv-stringify/sync\" :rename {stringify stringify-csv}]\n   [cljs.core.async :refer [chan put! take! >! <! buffer dropping-buffer sliding-buffer timeout close! alts!]]\n   [cljs.core.async :refer-macros [go go-loop alt!]]\n   [reagent.core :as r]))\n\n(def csv-data\n  (r/atom\n    {:input-data\n     [{:date \"1/1/00 to 2/1/00\" :walks 2 :potatoes 10 :leaves 300 :climbs 1}\n      {:date \"2/2/00 to 3/1/00\" :walks 2 :potatoes 10 :leaves 300 :climbs 1}\n      {:date \"3/2/00 to 4/1/00\" :walks 3 :potatoes 15 :leaves 300 :climbs 3}\n      {:date \"4/2/00 to 5/1/00\" :walks 2 :potatoes 20 :leaves 300 :climbs 3}]\n     :biomarker-data\n     [{:date \"1/1/00 to 2/1/00\" :BW 100 :health 50 :bio-age 6 :ai-age 10}\n      {:date \"2/2/00 to 3/1/00\" :BW 100 :health 50 :bio-age 8 :ai-age 10}\n      {:date \"3/2/00 to 4/1/00\" :BW 150 :health 60 :bio-age 9 :ai-age 10}\n      {:date \"4/2/00 to 5/1/00\" :BW 150 :health 70 :bio-age 9 :ai-age 10}]}))\n\n(defn maps-to-csv [maps]\n  (stringify-csv\n    (clj->js maps)\n    (clj->js {:header true})))\n\n(defn download-as-csv [maps export-name]\n  (let [data-blob (js/Blob. #js [(maps-to-csv maps)]\n                            #js {:type \"text/csv;charset=utf-8;\"})\n        link (.createElement js/document \"a\")]\n    (set! (.-href link) (.createObjectURL js/URL data-blob))\n    (.setAttribute link \"download\" export-name)\n    (.appendChild (.-body js/document) link)\n    (.click link)\n    (.removeChild (.-body js/document) link)))\n\n;; -------- Data \"Uploading\" --------------------------------------------\n;; From https://mrmcc3.github.io/blog/posts/csv-with-clojurescript/ \n\n(def first-file\n  (map (fn [e]\n         (let [target (.-currentTarget e)\n               file (-> target .-files (aget 0))]\n           (set! (.-value target) \"\")\n           file))))\n\n(defn my-parse-csv [csv-data]\n  ; [{}])\n  (js->clj\n   (parse-csv csv-data (clj->js {:columns true\n                                 :skip_empty_lines true\n                                 :trim true}))\n   :keywordize-keys true))\n\n(def extract-result\n  (map #(-> % .-target .-result my-parse-csv)))\n\n;;; Input data file\n\n(def input-upload-reqs (chan 1 first-file))\n(def input-file-reads (chan 1 extract-result))\n\n(go-loop []\n  (let [reader (js/FileReader.)\n        file (<! input-upload-reqs)]\n    (swap! csv-data assoc :input-file-name (.-name file))\n    (set! (.-onload reader) #(put! input-file-reads %))\n    (.readAsText reader file)\n    (recur)))\n\n(go-loop []\n  (swap! csv-data assoc :input-data (<! input-file-reads))\n  (recur))\n\n;; Biomarker data file\n(def biomarker-upload-reqs (chan 1 first-file))\n(def biomarker-file-reads (chan 1 extract-result))\n\n(go-loop []\n  (let [reader (js/FileReader.)\n        file (<! biomarker-upload-reqs)]\n    (swap! csv-data assoc :biomarker-file-name (.-name file))\n    (set! (.-onload reader) #(put! biomarker-file-reads %))\n    (.readAsText reader file)\n    (recur)))\n\n(go-loop []\n  (swap! csv-data assoc :biomarker-data (<! biomarker-file-reads))\n  (recur))\n\n(defn upload-btn [file-name upload-reqs-channel]\n  [:span.upload-label\n   [:label.file-label\n    [:input.file-input\n     {:type \"file\" :accept \".csv\" :on-change #(put! upload-reqs-channel %)}]\n    [:span.file-cta\n     [:span.file-icon\n      [:i.fa.fa-upload.fa-lg]]\n     [:span.file-label (or file-name \"Choose a file...\")]]]])\n     ;; Adds an \"X\" that can be clicked to clear the selected file.\n     ;; (when file-name \n    ;;   [:i.fa.fa-times {:on-click #(reset! csv-data {})}]]]]])\n"]}